<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œç¾äººç”Ÿ-å®Œç¾è®¡ç®—-å®Œç¾ç”Ÿæ´»</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Microsoft YaHei', sans-serif; }
        body { background: #f0f2f5; color: #333; padding: 8px; max-width: 400px; margin: auto; font-size: 12px; }
        .container { background: white; border-radius: 4px; padding: 10px; margin-bottom: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        h1 { font-size: 14px; color: #2c3e50; margin-bottom: 2px; text-align: center; }
        .subtitle { font-size: 10px; color: #666; text-align: center; margin-bottom: 15px; }
        
        /* è¾“å…¥åŒºåŸŸ */
        .input-row { display: flex; gap: 6px; margin-bottom: 8px; }
        .input-group { flex: 1; }
        .input-label { font-size: 10px; font-weight: bold; color: #555; margin-bottom: 2px; }
        input { width: 100%; padding: 4px 6px; border: 1px solid #ddd; border-radius: 3px; font-size: 11px; height: 24px; }
        
        /* æ€§åˆ«é€‰æ‹© */
        .gender-group { display: flex; gap: 6px; margin-bottom: 8px; }
        .gender-btn { flex: 1; padding: 4px; text-align: center; border: 1px solid #ddd; border-radius: 3px; cursor: pointer; font-size: 11px; }
        .gender-btn.active { background: #3498db; color: white; border-color: #3498db; }
        
        /* ç»“æœåŒºåŸŸ */
        .result { display: none; margin-top: 8px; padding: 8px; background: #f8f9fa; border-radius: 3px; }
        
        /* ä½“é‡æŒ‡æ•°æ˜¾ç¤ºåŒºåŸŸ - é‡ç‚¹çªå‡º */
        .bmi-display { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            padding: 16px 12px;
            margin: 8px 0 12px 0;
            text-align: center;
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        .bmi-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3498db, #2ecc71, #f1c40f, #e74c3c);
        }
        .bmi-label { 
            font-size: 12px;
            opacity: 0.9;
            letter-spacing: 1px;
        }
        .bmi-value { 
            font-size: 48px;
            font-weight: bold;
            margin: 4px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            font-family: 'Arial', sans-serif;
        }
        .bmi-category { 
            font-size: 16px;
            font-weight: bold;
            margin-top: 4px;
            padding: 6px 16px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            display: inline-block;
            backdrop-filter: blur(10px);
        }
        .bmi-unit {
            font-size: 12px;
            opacity: 0.8;
            margin-left: 4px;
        }
        
        .evaluation { 
            background: #fff9e6; 
            padding: 8px; 
            border-radius: 6px; 
            margin: 12px 0; 
            font-size: 11px; 
            border-left: 3px solid #f1c40f;
            line-height: 1.4;
        }
        
        /* åŒåˆ—ç»“æœ */
        .result-row { display: flex; gap: 8px; margin: 12px 0; }
        .result-item { 
            flex: 1; 
            padding: 10px; 
            background: white; 
            border-radius: 6px; 
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        .result-label { 
            font-size: 10px; 
            color: #777; 
            margin-bottom: 4px;
            font-weight: bold;
        }
        .result-value { 
            font-size: 18px; 
            font-weight: bold; 
            margin: 6px 0;
            color: #2c3e50;
        }
        .result-range { 
            font-size: 9px; 
            color: #666; 
            margin-bottom: 8px;
        }
        
        /* å¢å¼ºè¿›åº¦æ¡ */
        .progress-container { 
            position: relative;
            height: 10px; 
            background: linear-gradient(to right, #e74c3c, #f1c40f, #2ecc71, #f1c40f, #e74c3c);
            border-radius: 5px; 
            margin: 10px 0; 
            overflow: hidden; 
        }
        .progress-fill { 
            height: 100%; 
            border-radius: 5px; 
            position: absolute;
            top: 0;
            left: 0;
            transition: all 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        
        /* è¿›åº¦æ¡æ ‡è®°ç‚¹ */
        .progress-marker {
            position: absolute;
            top: -2px;
            width: 3px;
            height: 14px;
            background: rgba(0,0,0,0.3);
            z-index: 1;
        }
        .marker-label {
            position: absolute;
            top: 12px;
            transform: translateX(-50%);
            font-size: 8px;
            color: #666;
            white-space: nowrap;
        }
        
        /* çŠ¶æ€æ ‡ç­¾ */
        .status-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 9px;
            font-weight: bold;
            margin-top: 4px;
        }
        
        /* å¥åº·å»ºè®® */
        .advice { 
            font-size: 11px; 
            color: #666; 
            margin-top: 12px; 
            padding-top: 10px; 
            border-top: 2px dashed #ddd; 
            line-height: 1.5;
        }
        .advice strong {
            color: #2c3e50;
        }
        
        /* è¡¨æ ¼ */
        .bmi-table { width: 100%; border-collapse: collapse; font-size: 10px; margin-top: 8px; }
        .bmi-table th, .bmi-table td { border: 1px solid #ddd; padding: 6px; text-align: center; }
        .bmi-table th { background: #f8f9fa; color: #2c3e50; }
        .bmi-table tr:nth-child(even) { background: #f8f9fa; }
        
        /* é¢œè‰²ç±» */
        .red { color: #e74c3c; }
        .green { color: #27ae60; }
        .orange { color: #f39c12; }
        .dark-red { color: #c0392b; }
        .blue { color: #3498db; }
        
        .status-red { background: rgba(231, 76, 60, 0.1); color: #e74c3c; border: 1px solid rgba(231, 76, 60, 0.3); }
        .status-orange { background: rgba(243, 156, 18, 0.1); color: #f39c12; border: 1px solid rgba(243, 156, 18, 0.3); }
        .status-green { background: rgba(46, 204, 113, 0.1); color: #27ae60; border: 1px solid rgba(46, 204, 113, 0.3); }
        .status-blue { background: rgba(52, 152, 219, 0.1); color: #2980b9; border: 1px solid rgba(52, 152, 219, 0.3); }
        
        /* åŠ¨ç”» */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes slideIn {
            from { transform: translateY(10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .pulse { animation: pulse 0.6s ease-in-out; }
        .slide-in { animation: slideIn 0.5s ease-out; }
        
        /* é”™è¯¯æç¤º */
        .error { 
            color: #e74c3c; 
            font-size: 10px; 
            margin-top: 4px; 
            display: none; 
        }
        
        /* è‡ªåŠ¨è®¡ç®—æç¤º */
        .auto-calculation { 
            font-size: 10px; 
            color: #666; 
            text-align: center; 
            margin-top: 8px; 
            padding-top: 8px;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 400px) {
            .input-row { flex-wrap: wrap; }
            .input-group { flex: 1 0 30%; }
            .bmi-value { font-size: 40px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æˆå¹´äººä½“é‡æŒ‡æ•°è®¡ç®—å™¨</h1>
        <div class="subtitle"></div>
        
        <div class="input-row">
            <div class="input-group">
                <div class="input-label">ä½“é‡ (æ–¤)</div>
                <input type="number" id="weight" value="106" min="1" step="0.1">
                <div class="error" id="weightError">è¯·è¾“å…¥æœ‰æ•ˆçš„ä½“é‡</div>
            </div>
            <div class="input-group">
                <div class="input-label">èº«é«˜ (cm)</div>
                <input type="number" id="height" value="155" min="1" step="0.1">
                <div class="error" id="heightError">è¯·è¾“å…¥æœ‰æ•ˆçš„èº«é«˜</div>
            </div>
            <div class="input-group">
                <div class="input-label">å¹´é¾„</div>
                <input type="number" id="age" value="25" min="1" max="120">
                <div class="error" id="ageError">è¯·è¾“å…¥æœ‰æ•ˆçš„å¹´é¾„</div>
            </div>
        </div>
        
        <div class="gender-group">
            <div class="gender-btn active" id="male">ç”·</div>  <!-- ä¿®æ”¹ï¼šç”·æ€§è®¾ä¸ºé»˜è®¤æ¿€æ´» -->
            <div class="gender-btn" id="female">å¥³</div>  <!-- ä¿®æ”¹ï¼šå¥³æ€§é»˜è®¤ä¸æ¿€æ´» -->
        </div>
        
        <div class="result" id="result">
            <!-- çªå‡ºçš„ä½“é‡æŒ‡æ•°æ˜¾ç¤º -->
            <div class="bmi-display">
                <div class="bmi-label">æ‚¨çš„ä½“é‡æŒ‡æ•°</div>
                <div class="bmi-value" id="bmiValue">--<span class="bmi-unit">kg/mÂ²</span></div>
                <div class="bmi-category" id="bmiCategory">--</div>
            </div>
            
            <div class="evaluation" id="evaluationText">è¯·è¾“å…¥æ‚¨çš„ä½“é‡ã€èº«é«˜å’Œå¹´é¾„æ¥è®¡ç®—BMI</div>
            
            <div class="result-row">
                <div class="result-item">
                    <div class="result-label">ä½“é‡</div>
                    <div class="result-value" id="idealWeight">-- æ–¤</div>
                    <div class="result-range" id="idealRange">ä½“é‡èŒƒå›´: -- è‡³ -- æ–¤</div>
                    
                    <!-- ä½“é‡è¿›åº¦æ¡ -->
                    <div class="progress-container" id="weightProgressContainer">
                        <div class="progress-marker" style="left: 25%;"></div>
                        <div class="progress-marker" style="left: 50%;"></div>
                        <div class="progress-marker" style="left: 75%;"></div>
                        <div class="progress-fill" id="idealWeightBar" style="width: 0%"></div>
                    </div>
                    
                    <div class="result-range">
                        <span style="float: left; color: #e74c3c;">è¿‡è½»</span>
                        <span style="float: right; color: #e74c3c;">è¿‡é‡</span>
                        <span style="display: block; text-align: center; color: #27ae60;">ç†æƒ³</span>
                    </div>
                    <div class="status-tag" id="weightStatus">--</div>
                </div>
                
                <div class="result-item">
                    <div class="result-label">ä½“è„‚ç‡</div>
                    <div class="result-value" id="bodyFat">-- %</div>
                    <div class="result-range" id="fatRange">ä½“è„‚èŒƒå›´: --% è‡³ --%</div>
                    
                    <!-- ä½“è„‚ç‡è¿›åº¦æ¡ -->
                    <div class="progress-container" id="fatProgressContainer">
                        <div class="progress-marker" style="left: 30%;"></div>
                        <div class="progress-marker" style="left: 60%;"></div>
                        <div class="progress-fill" id="bodyFatBar" style="width: 0%"></div>
                    </div>
                    
                    <div class="result-range">
                        <span style="float: left; color: #3498db;">åä½</span>
                        <span style="float: right; color: #f39c12;">åé«˜</span>
                        <span style="display: block; text-align: center; color: #27ae60;">ç†æƒ³</span>
                    </div>
                    <div class="status-tag" id="fatStatus">--</div>
                </div>
            </div>
            
            <div class="advice">
                <strong>å¥åº·å»ºè®®ï¼š</strong> 
                <span id="healthAdvice">è¯·è¾“å…¥å®Œæ•´ä¿¡æ¯è·å–å»ºè®®</span>
            </div>
        </div>
    </div>
    
    <div class="container">
        <h2>ä½“é‡æŒ‡æ•°åˆ†ç±»æ ‡å‡†</h2>
        <table class="bmi-table">
            <tr><th>åˆ†ç±»</th><th>BMIèŒƒå›´</th><th>å¥åº·é£é™©</th><th>å»ºè®®</th></tr>
            <tr><td class="red">ä½“é‡è¿‡è½»</td><td>&lt; 18.50</td><td>è¥å…»ä¸è‰¯é£é™©</td><td>å¢åŠ è¥å…»æ‘„å…¥</td></tr>
            <tr><td class="green">æ­£å¸¸èŒƒå›´</td><td>18.50ï½23.90</td><td>å¥åº·é£é™©è¾ƒä½</td><td>ä¿æŒè‰¯å¥½ä¹ æƒ¯</td></tr>
            <tr><td class="orange">è¶…é‡</td><td>24.00ï½27.90</td><td>å¥åº·é£é™©å¢åŠ </td><td>æ§åˆ¶ä½“é‡</td></tr>
            <tr><td class="dark-red">è‚¥èƒ–</td><td>â‰¥ 28.00</td><td>é«˜é£é™©</td><td>å»ºè®®å°±åŒ»å’¨è¯¢</td></tr>
        </table>
    </div>

    <script>
        const weightInput = document.getElementById('weight');
        const heightInput = document.getElementById('height');
        const ageInput = document.getElementById('age');
        const resultDiv = document.getElementById('result');
        const bmiValue = document.getElementById('bmiValue');
        const bmiCategory = document.getElementById('bmiCategory');
        const evaluationText = document.getElementById('evaluationText');
        const idealWeight = document.getElementById('idealWeight');
        const idealRange = document.getElementById('idealRange');
        const bodyFat = document.getElementById('bodyFat');
        const fatRange = document.getElementById('fatRange');
        const healthAdvice = document.getElementById('healthAdvice');
        const idealWeightBar = document.getElementById('idealWeightBar');
        const bodyFatBar = document.getElementById('bodyFatBar');
        const weightStatus = document.getElementById('weightStatus');
        const fatStatus = document.getElementById('fatStatus');
        
        // é”™è¯¯æç¤ºå…ƒç´ 
        const weightError = document.getElementById('weightError');
        const heightError = document.getElementById('heightError');
        const ageError = document.getElementById('ageError');
        
        // ä¿®æ”¹ï¼šé»˜è®¤è®¾ç½®ä¸ºç”·æ€§
        let gender = 'male';
        
        // æ€§åˆ«é€‰æ‹©
        document.querySelectorAll('.gender-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.gender-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                gender = this.id === 'male' ? 'male' : 'female';
                calculate();
            });
        });
        
        // éªŒè¯è¾“å…¥
        function validateInputs() {
            let isValid = true;
            
            // é‡ç½®é”™è¯¯ä¿¡æ¯
            [weightError, heightError, ageError].forEach(error => error.style.display = 'none');
            
            const weight = parseFloat(weightInput.value);
            const height = parseFloat(heightInput.value);
            const age = parseInt(ageInput.value);
            
            // éªŒè¯ä½“é‡
            if (isNaN(weight) || weight <= 0) {
                weightError.textContent = weight <= 0 ? "ä½“é‡å¿…é¡»å¤§äº0" : "è¯·è¾“å…¥æœ‰æ•ˆçš„ä½“é‡";
                weightError.style.display = 'block';
                isValid = false;
            } else if (weight > 1000) {
                weightError.textContent = "ä½“é‡å€¼è¿‡å¤§ï¼Œè¯·æ£€æŸ¥è¾“å…¥";
                weightError.style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯èº«é«˜
            if (isNaN(height) || height <= 0) {
                heightError.textContent = height <= 0 ? "èº«é«˜å¿…é¡»å¤§äº0" : "è¯·è¾“å…¥æœ‰æ•ˆçš„ä½“é‡";
                heightError.style.display = 'block';
                isValid = false;
            } else if (height < 50) {
                heightError.textContent = "èº«é«˜å€¼è¿‡å°ï¼Œè¯·æ£€æŸ¥è¾“å…¥";
                heightError.style.display = 'block';
                isValid = false;
            } else if (height > 300) {
                heightError.textContent = "èº«é«˜å€¼è¿‡å¤§ï¼Œè¯·æ£€æŸ¥è¾“å…¥";
                heightError.style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯å¹´é¾„
            if (isNaN(age) || age <= 0) {
                ageError.textContent = age <= 0 ? "å¹´é¾„å¿…é¡»å¤§äº0" : "è¯·è¾“å…¥æœ‰æ•ˆçš„å¹´é¾„";
                ageError.style.display = 'block';
                isValid = false;
            } else if (age < 1 || age > 120) {
                ageError.textContent = "å¹´é¾„åº”åœ¨1-120å²ä¹‹é—´";
                ageError.style.display = 'block';
                isValid = false;
            }
            
            return isValid;
        }
        
        // ç²¾ç¡®è®¡ç®—ä½“é‡
        function calculateIdealWeight(heightMeters, isChineseStandard = true) {
            // èº«é«˜å•ä½ï¼šç±³
            // è¿”å›å•ä½ï¼šæ–¤
            
            if (isChineseStandard) {
                // ä¸­å›½æ ‡å‡†ï¼šBMI 18.5-23.9
                const minBMI = 18.5;
                const maxBMI = 23.9;
                
                // å…¬æ–¤
                const minWeightKg = minBMI * heightMeters * heightMeters;
                const maxWeightKg = maxBMI * heightMeters * heightMeters;
                
                // è½¬æ¢ä¸ºæ–¤
                const minWeightJin = minWeightKg * 2;
                const maxWeightJin = maxWeightKg * 2;
                
                return {
                    min: Math.round(minWeightJin * 10) / 10,  // ä¿ç•™1ä½å°æ•°
                    max: Math.round(maxWeightJin * 10) / 10
                };
            } else {
                // å›½é™…æ ‡å‡†ï¼šBMI 18.5-24.9
                const minBMI = 18.5;
                const maxBMI = 24.9;
                
                const minWeightKg = minBMI * heightMeters * heightMeters;
                const maxWeightKg = maxBMI * heightMeters * heightMeters;
                
                const minWeightJin = minWeightKg * 2;
                const maxWeightJin = maxWeightKg * 2;
                
                return {
                    min: Math.round(minWeightJin * 10) / 10,
                    max: Math.round(maxWeightJin * 10) / 10
                };
            }
        }
        
        // è®¡ç®—å‡½æ•°
        function calculate() {
            // éªŒè¯è¾“å…¥
            if (!validateInputs()) {
                resultDiv.style.display = 'none';
                return;
            }
            
            const weight = parseFloat(weightInput.value) / 2; // æ–¤è½¬å…¬æ–¤
            const heightCM = parseFloat(heightInput.value);
            const heightM = heightCM / 100; // cmè½¬m
            const age = parseInt(ageInput.value);
            
            // é˜²æ­¢é™¤é›¶é”™è¯¯
            if (heightM === 0) {
                bmiValue.textContent = "0.00";  // ä¿®æ”¹ä¸ºä¸¤ä½å°æ•°
                bmiCategory.textContent = "æ•°æ®æ— æ•ˆ";
                bmiCategory.className = 'bmi-category red';
                evaluationText.textContent = "èº«é«˜ä¸èƒ½ä¸º0";
                return;
            }
            
            // è®¡ç®—BMI - åªä¿®æ”¹è¿™é‡Œï¼Œæ˜¾ç¤ºä¸¤ä½å°æ•°
            const bmi = weight / (heightM * heightM);
            bmiValue.textContent = bmi.toFixed(2);  // ä¿®æ”¹ä¸ºtoFixed(2) æ˜¾ç¤ºä¸¤ä½å°æ•°
            
            // BMIåˆ†ç±»
            let category, categoryClass, statusClass;
            if (bmi === 0) {
                category = "ä½“é‡ä¸º0";
                categoryClass = 'red';
                statusClass = 'status-red';
            } else if (bmi < 18.5) {
                category = 'ä½“é‡è¿‡è½»';
                categoryClass = 'red';
                statusClass = 'status-blue';
            } else if (bmi < 24) {
                category = 'æ­£å¸¸èŒƒå›´';
                categoryClass = 'green';
                statusClass = 'status-green';
            } else if (bmi < 28) {
                category = 'è¶…é‡';
                categoryClass = 'orange';
                statusClass = 'status-orange';
            } else {
                category = 'è‚¥èƒ–';
                categoryClass = 'dark-red';
                statusClass = 'status-red';
            }
            
            bmiCategory.textContent = category;
            bmiCategory.className = 'bmi-category ' + categoryClass;
            
            // å¦‚æœBMI>=23.9åˆ™æ˜¾ç¤ºä¸ºè¶…é‡ï¼ˆæ›´ä¸¥æ ¼çš„æ ‡å‡†ï¼‰
            if (bmi >= 23.9) {
                category = 'è¶…é‡';
                categoryClass = 'orange';
                statusClass = 'status-orange';
                bmiCategory.textContent = category;
                bmiCategory.className = 'bmi-category ' + categoryClass;
            }
            
            // å¹½é»˜è¯„ä»·
            let quote = "";
            if (weight === 0) {
                quote = "ä½“é‡ä¸º0ï¼Ÿè¿™ä¸å¤ªå¯èƒ½å§ï¼Œè¯·æ£€æŸ¥è¾“å…¥ï¼";
            } else if (bmi < 18.5) {
                const quotes = [
                    "ä½“é‡è¿‡è½»ï¼Œéœ€è¦é€‚å½“å¢åŠ è¥å…»å“¦ï¼ğŸ",
                    "è‹—æ¡æ˜¯å¥½äº‹ï¼Œä½†å¥åº·æ›´é‡è¦ï¼è®°å¾—å¥½å¥½åƒé¥­ï½",
                    "æ‚¨éœ€è¦æ›´å¤šçš„èƒ½é‡å‚¨å¤‡ï¼å»ºè®®å¢åŠ å¥åº·é¥®é£Ÿ"
                ];
                quote = quotes[Math.floor(Math.random() * quotes.length)];
            } else if (bmi < 24) {
                const quotes = [
                    "å®Œç¾ä½“å‹ï¼ç»§ç»­ä¿æŒå¥åº·ç”Ÿæ´»ä¹ æƒ¯ï¼ğŸ’ª",
                    "æ ‡å‡†èº«æï¼Œä¸ºæ‚¨ç‚¹èµï¼ç»§ç»­ä¿æŒï½",
                    "ç†æƒ³ä½“é‡æŒ‡æ•°ï¼Œå¥åº·ç”Ÿæ´»çš„å…¸èŒƒï¼"
                ];
                quote = quotes[Math.floor(Math.random() * quotes.length)];
            } else if (bmi < 28) {
                const quotes = [
                    "ä½“é‡æœ‰ç‚¹è¶…æ ‡ï¼Œæ³¨æ„æ§åˆ¶å“¦ï¼å¯ä»¥é€‚å½“å¢åŠ è¿åŠ¨ğŸƒ",
                    "è½»å¾®è¶…é‡ï¼Œå»ºè®®è°ƒæ•´é¥®é£Ÿç»“æ„ï¼Œå¢åŠ é”»ç‚¼",
                    "æ˜¯æ—¶å€™å’Œå¤œå®µè¯´å†è§äº†ï¼æ§åˆ¶ä½“é‡ä»ç°åœ¨å¼€å§‹"
                ];
                quote = quotes[Math.floor(Math.random() * quotes.length)];
            } else {
                const quotes = [
                    "ä½“é‡æ˜æ˜¾åé«˜ï¼Œå»ºè®®å’¨è¯¢ä¸“ä¸šäººå£«ï¼",
                    "è‚¥èƒ–ä¼šå¢åŠ å¥åº·é£é™©ï¼Œå»ºè®®åˆ¶å®šå‡é‡è®¡åˆ’",
                    "å¥åº·ç¬¬ä¸€ï¼å»ºè®®å¯»æ±‚ä¸“ä¸šæŒ‡å¯¼æ§åˆ¶ä½“é‡"
                ];
                quote = quotes[Math.floor(Math.random() * quotes.length)];
            }
            evaluationText.textContent = quote;
            
            // è®¡ç®—ä½“é‡ï¼ˆä½¿ç”¨ç²¾ç¡®è®¡ç®—ï¼‰
            const idealRangeResult = calculateIdealWeight(heightM, true);
            const minIdeal = idealRangeResult.min;
            const maxIdeal = idealRangeResult.max;
            const currentWeight = weight * 2; // å½“å‰ä½“é‡ï¼ˆæ–¤ï¼‰
            
            idealWeight.textContent = `${currentWeight.toFixed(1)}`;  // ä½“é‡ä¿æŒ1ä½å°æ•°
            idealRange.textContent = `ä½“é‡èŒƒå›´: ${minIdeal.toFixed(1)} è‡³ ${maxIdeal.toFixed(1)} æ–¤`;
            
            // ä½“é‡è¿›åº¦æ¡
            let weightProgress = 0;
            let weightStatusText = '';
            
            if (currentWeight === 0) {
                weightProgress = 0;
                weightStatusText = 'ä½“é‡ä¸º0';
                weightStatus.className = 'status-tag status-red';
            } else if (currentWeight < minIdeal) {
                // ä½äºä¸‹é™ï¼Œå å‰25%
                weightProgress = (currentWeight / minIdeal) * 25;
                weightStatusText = 'åè½»';
                weightStatus.className = 'status-tag status-blue';
            } else if (currentWeight > maxIdeal) {
                // é«˜äºä¸Šé™ï¼Œå å25%
                const excess = currentWeight - maxIdeal;
                const maxExcess = maxIdeal * 0.5; // æœ€å¤šæ˜¾ç¤ºè¶…é‡50%
                weightProgress = 75 + (excess / maxExcess) * 25;
                if (weightProgress > 100) weightProgress = 100;
                weightStatusText = 'åé‡';
                weightStatus.className = 'status-tag status-orange';
            } else {
                // åœ¨ç†æƒ³èŒƒå›´å†…ï¼Œå ä¸­é—´50%
                const idealRangeWidth = maxIdeal - minIdeal;
                if (idealRangeWidth > 0) {
                    weightProgress = 25 + ((currentWeight - minIdeal) / idealRangeWidth) * 50;
                } else {
                    weightProgress = 50; // å¦‚æœèŒƒå›´å®½åº¦ä¸º0ï¼Œåˆ™æ˜¾ç¤ºåœ¨ä¸­é—´
                }
                weightStatusText = 'ç†æƒ³';
                weightStatus.className = 'status-tag status-green';
            }
            
            // ç¡®ä¿è¿›åº¦åœ¨0-100ä¹‹é—´
            weightProgress = Math.max(0, Math.min(100, weightProgress));
            idealWeightBar.style.width = `${weightProgress}%`;
            weightStatus.textContent = weightStatusText;
            
            // ä½“è„‚ç‡è®¡ç®—
            let bodyFatValue = 0;
            if (bmi > 0) {
                const genderCoefficient = gender === 'male' ? 1 : 0;
                bodyFatValue = (1.2 * bmi) + (0.23 * age) - (10.8 * genderCoefficient) - 5.4;
                bodyFatValue = Math.max(3, Math.min(50, bodyFatValue));
            }
            bodyFat.textContent = bodyFatValue > 0 ? `${bodyFatValue.toFixed(1)}` : "--";  // ä½“è„‚ç‡ä¿æŒ1ä½å°æ•°
            
            // ä½“è„‚ç‡ä½“è„‚èŒƒå›´
            const fatStandard = gender === 'male' ? { 
                min: 8, 
                max: 20, 
                goodMin: 10, 
                goodMax: 18 
            } : { 
                min: 21, 
                max: 33, 
                goodMin: 23, 
                goodMax: 30 
            };
            fatRange.textContent = `ä½“è„‚èŒƒå›´: ${fatStandard.min}% è‡³ ${fatStandard.max}%`;
            
            // ä½“è„‚ç‡è¿›åº¦æ¡
            let fatProgress = 0;
            let fatStatusText = '';
            
            if (bodyFatValue <= 0) {
                fatProgress = 0;
                fatStatusText = 'æ— æ³•è®¡ç®—';
                fatStatus.className = 'status-tag';
            } else if (bodyFatValue < fatStandard.goodMin) {
                // åä½ï¼Œå å‰30%
                fatProgress = (bodyFatValue / fatStandard.goodMin) * 30;
                fatStatusText = 'åä½';
                fatStatus.className = 'status-tag status-blue';
            } else if (bodyFatValue > fatStandard.goodMax) {
                // åé«˜ï¼Œå å30%
                const excess = bodyFatValue - fatStandard.goodMax;
                const maxExcess = fatStandard.goodMax * 0.5;
                fatProgress = 60 + (excess / maxExcess) * 40;
                if (fatProgress > 100) fatProgress = 100;
                fatStatusText = 'åé«˜';
                fatStatus.className = 'status-tag status-orange';
            } else {
                // åœ¨ç†æƒ³èŒƒå›´å†…ï¼Œå ä¸­é—´40%
                const fatRangeWidth = fatStandard.goodMax - fatStandard.goodMin;
                if (fatRangeWidth > 0) {
                    fatProgress = 30 + ((bodyFatValue - fatStandard.goodMin) / fatRangeWidth) * 40;
                } else {
                    fatProgress = 50;
                }
                fatStatusText = 'ç†æƒ³';
                fatStatus.className = 'status-tag status-green';
            }
            
            // ç¡®ä¿è¿›åº¦åœ¨0-100ä¹‹é—´
            fatProgress = Math.max(0, Math.min(100, fatProgress));
            bodyFatBar.style.width = `${fatProgress}%`;
            fatStatus.textContent = fatStatusText;
            
            // å¥åº·å»ºè®®
            let advice = "";
            if (weight === 0) {
                advice = "ä½“é‡ä¸èƒ½ä¸º0ï¼Œè¯·é‡æ–°è¾“å…¥æ­£ç¡®çš„ä½“é‡å€¼ã€‚";
            } else if (bmi < 18.5) {
                advice = "å»ºè®®å¢åŠ ä¼˜è´¨è›‹ç™½æ‘„å…¥ï¼Œå¦‚é¸¡è›‹ã€ç‰›å¥¶ã€é±¼è‚‰ç­‰ï¼Œé€‚å½“è¿›è¡ŒåŠ›é‡è®­ç»ƒå¢åŠ è‚Œè‚‰é‡ã€‚";
            } else if (bmi < 24) {
                advice = "ç»§ç»­ä¿æŒå‡è¡¡é¥®é£Ÿå’Œè§„å¾‹è¿åŠ¨ï¼Œæ¯å‘¨è‡³å°‘150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨ã€‚";
            } else if (bmi < 28) {
                advice = "æ§åˆ¶æ€»çƒ­é‡æ‘„å…¥ï¼Œå‡å°‘é«˜ç³–é«˜è„‚é£Ÿç‰©ï¼Œå¢åŠ æœ‰æ°§è¿åŠ¨å¦‚å¿«èµ°ã€æ¸¸æ³³ã€éª‘è‡ªè¡Œè½¦ã€‚";
            } else {
                advice = "å»ºè®®å’¨è¯¢è¥å…»å¸ˆæˆ–åŒ»ç”Ÿï¼Œåˆ¶å®šç§‘å­¦çš„å‡é‡è®¡åˆ’ï¼Œæ³¨æ„é¥®é£Ÿæ§åˆ¶å’Œé€‚åº¦è¿åŠ¨ç»“åˆã€‚";
            }
            
            // å¦‚æœBMI>=23.9ï¼Œç»™å‡ºè¶…é‡å»ºè®®
            if (bmi >= 23.9) {
                advice = "æ‚¨çš„ä½“é‡å·²æ¥è¿‘æˆ–è¾¾åˆ°è¶…é‡æ ‡å‡†ï¼Œå»ºè®®æ§åˆ¶æ€»çƒ­é‡æ‘„å…¥ï¼Œå‡å°‘é«˜ç³–é«˜è„‚é£Ÿç‰©ï¼Œå¢åŠ æœ‰æ°§è¿åŠ¨å¦‚å¿«èµ°ã€æ¸¸æ³³ã€éª‘è‡ªè¡Œè½¦ã€‚";
            }
            
            healthAdvice.textContent = advice;
            
            // æ˜¾ç¤ºç»“æœåŒºåŸŸå¹¶æ·»åŠ åŠ¨ç”»
            resultDiv.style.display = 'block';
            resultDiv.classList.remove('slide-in');
            void resultDiv.offsetWidth; // è§¦å‘é‡ç»˜
            resultDiv.classList.add('slide-in');
            
            // BMIå€¼è„‰å†²åŠ¨ç”»
            bmiValue.classList.remove('pulse');
            void bmiValue.offsetWidth;
            bmiValue.classList.add('pulse');
            
            // è¿›åº¦æ¡åŠ¨ç”»å»¶è¿Ÿ
            setTimeout(() => {
                idealWeightBar.style.transition = 'all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1)';
                bodyFatBar.style.width = `${fatProgress}%`;
            }, 300);
        }
        
        // è¾“å…¥äº‹ä»¶ç›‘å¬ - å®æ—¶è®¡ç®—
        [weightInput, heightInput, ageInput].forEach(input => {
            input.addEventListener('input', function() {
                // éšè—é”™è¯¯æç¤º
                const errorId = this.id + 'Error';
                document.getElementById(errorId).style.display = 'none';
                
                // å®æ—¶è®¡ç®—
                calculate();
            });
        });
        
        // åˆå§‹è®¡ç®—
        calculate();
    </script>
</body>
</html>